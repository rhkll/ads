import{r as x}from"./request-JwLsHdMO.js";import{e as u,k as Y,o as B,d as t,b as e,m as v,_ as A,r as i,s as P,c as F,a as w,F as I,x as j,E as C}from"./index-Cu0EYj2Q.js";const q={__name:"Add",props:{modelValue:Boolean,formData:Object,isEdit:Boolean},emits:["update:modelValue","submit"],setup(o,{emit:V}){const f=V,D=()=>{f("update:modelValue",!1)};return(c,l)=>{const s=u("el-input"),r=u("el-form-item"),b=u("el-form"),_=u("el-button"),p=u("el-dialog");return B(),Y(p,{modelValue:o.modelValue,title:o.isEdit?"编辑标准":"添加标准",width:"30%",onClose:D,"onUpdate:modelValue":l[7]||(l[7]=n=>c.$emit("update:modelValue",n))},{footer:t(()=>[e(_,{onClick:l[5]||(l[5]=n=>c.$emit("update:modelValue",!1))},{default:t(()=>l[8]||(l[8]=[v("取消")])),_:1,__:[8]}),e(_,{type:"primary",onClick:l[6]||(l[6]=n=>c.$emit("submit",o.formData))},{default:t(()=>l[9]||(l[9]=[v("确认")])),_:1,__:[9]})]),default:t(()=>[e(b,{model:o.formData,"label-width":"100px"},{default:t(()=>[e(r,{label:"姓名"},{default:t(()=>[e(s,{modelValue:o.formData.name,"onUpdate:modelValue":l[0]||(l[0]=n=>o.formData.name=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"年龄"},{default:t(()=>[e(s,{modelValue:o.formData.age,"onUpdate:modelValue":l[1]||(l[1]=n=>o.formData.age=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"性别"},{default:t(()=>[e(s,{modelValue:o.formData.gender,"onUpdate:modelValue":l[2]||(l[2]=n=>o.formData.gender=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"出生日期"},{default:t(()=>[e(s,{modelValue:o.formData.birthdate,"onUpdate:modelValue":l[3]||(l[3]=n=>o.formData.birthdate=n),type:"date","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(r,{label:"地址"},{default:t(()=>[e(s,{modelValue:o.formData.address,"onUpdate:modelValue":l[4]||(l[4]=n=>o.formData.address=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},L={class:"common-layout"},O={class:"user-header"},R={class:"table"},G={class:"example-pagination-block"},H={__name:"User",setup(o){const V=i([]),f=i(1),D=i(5),c=i(0),l=i(""),s=i(!1),r=i(!1),b=i({}),_=async d=>{try{await j.confirm("确认删除该记录吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await x.get("/del",{params:{id:d}}),C.success("删除成功"),p()}catch(a){console.error("删除失败:",a),C.info("已取消删除")}},p=async()=>{try{const d=await x.get("/index",{params:{name:l.value,pageIndex:f.value}});V.value=d.data.list,c.value=d.data.page.totalCount}catch(d){console.log("获取数据失败",d)}},n=d=>{f.value=d,p()},k=()=>{f.value=1,p()},E=()=>{r.value=!1,b.value={},s.value=!0},$=d=>{r.value=!0,b.value={...d},s.value=!0},z=async d=>{debugger;try{const a=r.value?"/Update":"/toAdd";console.log(a),await x.get(a,{params:d}),console.log(d.birthdate),C.success(r.value?"修改成功":"添加成功"),s.value=!1,p()}catch(a){console.error("操作失败:",a),C.error("操作失败")}};return P(()=>{p()}),(d,a)=>{const y=u("el-button"),M=u("el-input"),U=u("el-form-item"),S=u("el-form"),g=u("el-table-column"),h=u("el-table"),N=u("el-pagination");return B(),F(I,null,[w("div",L,[w("div",O,[e(y,{type:"primary",onClick:E},{default:t(()=>a[3]||(a[3]=[v("新增")])),_:1,__:[3]}),e(S,{inline:!0},{default:t(()=>[e(U,{label:"请输入"},{default:t(()=>[e(M,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=m=>l.value=m),placeholder:"请输入用户名",clearable:"",onClear:k},null,8,["modelValue"])]),_:1}),e(U,null,{default:t(()=>[e(y,{type:"primary",onClick:k},{default:t(()=>a[4]||(a[4]=[v("搜索")])),_:1,__:[4]})]),_:1})]),_:1})])]),w("div",R,[e(h,{data:V.value,style:{width:"100%"},"row-class-name":d.tableRowClassName},{default:t(()=>[e(g,{fixed:"",prop:"name",label:"姓名",width:"150"}),e(g,{prop:"age",label:"年龄",width:"120"}),e(g,{prop:"gender",label:"性别",width:"120"}),e(g,{prop:"birthdate",label:"出生日期",width:"120"}),e(g,{prop:"address",label:"地址",width:"600"}),e(g,{fixed:"right",label:"操作","min-width":"120"},{default:t(({row:m})=>[e(y,{type:"primary",size:"small",onClick:T=>$(m)},{default:t(()=>a[5]||(a[5]=[v(" 编辑 ")])),_:2,__:[5]},1032,["onClick"]),e(y,{type:"danger",size:"small",onClick:T=>_(m.id)},{default:t(()=>a[6]||(a[6]=[v("删除")])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data","row-class-name"])]),w("div",G,[e(N,{"current-page":f.value,"onUpdate:currentPage":a[1]||(a[1]=m=>f.value=m),"page-size":D.value,layout:"prev, pager, next",total:c.value,onCurrentChange:n},null,8,["current-page","page-size","total"])]),e(q,{modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=m=>s.value=m),"form-data":b.value,"is-edit":r.value,onSubmit:z},null,8,["modelValue","form-data","is-edit"])],64)}}},Q=A(H,[["__scopeId","data-v-13477dfe"]]);export{Q as default};
