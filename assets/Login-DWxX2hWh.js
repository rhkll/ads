import{_ as A,r as l,u as B,c as b,a as e,b as t,w as r,d as u,e as f,v as i,E as c,f as D,o as h}from"./index-Cu0EYj2Q.js";import{r as k}from"./request-JwLsHdMO.js";const E={class:"box"},q={key:0,class:"box1"},M={class:"card"},R={class:"card2"},I={class:"form"},S={class:"field"},T={class:"field"},j={key:1,class:"box2"},z={class:"card"},G={class:"card2"},H={class:"form"},J={class:"field"},K={class:"field"},O={class:"field"},Q={__name:"Login",setup(W){const m=l(""),v=l(""),g=B(),_=l(""),U=l(""),n=l(""),p=l(!1),w=()=>{p.value=!0},N=()=>{p.value=!1},P=async()=>{n.value==1||n.value==2?(await k.get("/addUser",{params:{UserName:_.value,UserPassword:U.value,pid:n.value}})).data.code===200?(c({message:"注册成功",type:"success"}),p.value=!1):c.error("注册失败"):c.error("用户等级不可以为空")},C=D(),V=()=>{F()},F=async()=>{try{const o=await k.get("/login",{params:{UserName:m.value,UserPassword:v.value}});o.data.code===200?(c({message:"登录成功",type:"success"}),g.setUserName(o.data.user.userName),g.setPid(o.data.user.pid),C.push({name:"index",query:{name:o.data.user.userName,pid:o.data.user.pid}})):c.error("没有用户")}catch(o){console.log("获取数据失败",o)}};return(o,s)=>{const y=f("Avatar"),d=f("el-icon"),x=f("Lock"),L=f("Female");return h(),b("div",E,[p.value?(h(),b("div",j,[e("div",z,[e("div",G,[e("form",H,[s[6]||(s[6]=e("p",{id:"heading"},"注册页面",-1)),e("div",J,[t(d,null,{default:u(()=>[t(y)]),_:1}),r(e("input",{type:"text",class:"input-field","onUpdate:modelValue":s[2]||(s[2]=a=>_.value=a),placeholder:"用户名",autocomplete:"off"},null,512),[[i,_.value]])]),e("div",K,[t(d,null,{default:u(()=>[t(x)]),_:1}),r(e("input",{type:"password",class:"input-field","onUpdate:modelValue":s[3]||(s[3]=a=>U.value=a),placeholder:"密码",autocomplete:"off"},null,512),[[i,U.value]])]),e("div",O,[t(d,null,{default:u(()=>[t(L)]),_:1}),r(e("input",{type:"text",class:"input-field","onUpdate:modelValue":s[4]||(s[4]=a=>n.value=a),placeholder:"用户等级"},null,512),[[i,n.value]])]),e("div",{class:"btn"},[e("button",{class:"button2",onClick:P},"注册"),e("button",{class:"button2",onClick:N},"返回")])])])])])):(h(),b("div",q,[e("div",M,[e("div",R,[e("form",I,[s[5]||(s[5]=e("p",{id:"heading"},"登录页面",-1)),e("div",S,[t(d,null,{default:u(()=>[t(y)]),_:1}),r(e("input",{type:"text",class:"input-field","onUpdate:modelValue":s[0]||(s[0]=a=>m.value=a),placeholder:"Username",autocomplete:"off"},null,512),[[i,m.value]])]),e("div",T,[t(d,null,{default:u(()=>[t(x)]),_:1}),r(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),class:"input-field",placeholder:"Password",autocomplete:"off"},null,512),[[i,v.value]])]),e("div",{class:"btn"},[e("button",{class:"button1",onClick:V}," 登录 "),e("button",{class:"button2",onClick:w},"注册")])])])])]))])}}},Z=A(Q,[["__scopeId","data-v-58bca436"]]);export{Z as default};
